(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{501:function(t,e,n){var content=n(503);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(29).default)("b0644ed2",content,!0,{sourceMap:!1})},502:function(t,e,n){"use strict";n(501)},503:function(t,e,n){var o=n(28)((function(i){return i[1]}));o.push([t.i,'.container{top:10px;margin:0 auto;display:flex;justify-content:center;align-items:center;text-align:center}.titled{width:60%;margin:auto;align-items:left;font-family:"Quicksand","Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;display:block;font-size:20px;color:#35495e;letter-spacing:1px}.subtitle{font-weight:300;font-size:42px;color:#526488;word-spacing:5px;padding-bottom:15px}.links{padding-top:15px}.inputt{margin-top:10px}.compwht{background-color:#c7c7c7;margin-top:5px}.v-application--wrap{background-color:#fff}.mermaid{width:flex}.markdown{top:0}',""]),o.locals={},t.exports=o},505:function(t,e,n){"use strict";n.r(e);n(151),n(52),n(36),n(7),n(82),n(72),n(91),n(150);var o=n(219),d=n(50),l={name:"Mermaid",props:{userName:{type:String},id:{type:String}},data:function(){return{mapName:"",editParetto:!1,tgtparents:"",newText:"",tgnumber:"",nextId:"",editText:"",currentmaxid:6,deleteCount:0,existCount:6,totalCount:0,linkText:[],nodeMemoTitle:"nodeMemo...",nodeMemoId:"1",title:"vue-mermaid",mermaid:{theme:"default",startOnLoad:!1,securityLevel:"loose"},data:[{id:"1",text:"A",link:["--\x3e"],next:["2"],editable:!0},{id:"2",text:"B"}],node1:[]}},created:function(){},computed:{countid:function(t){return this.deleteCount+this.existCount},isexistparent:function(t){return this.isButtonAble?"NG":"OK"},isButtonAble:function(t){return null===this.filterByText(this.tgtparents)},mapDataEditCount:function(t){return this.$store.getters["mapData/getMapDataEditCount"]},changedNodeElement:function(){return this.$store.getters["mapData/getNodechangedListLen"]}},watch:{mapDataEditCount:function(t,e){var n=this;this.$nextTick((function(){var t=JSON.parse(JSON.stringify(n.$store.state.mapData.mapDataList));n.data.length=0,console.log("pageフォルダ "+n.mapDataEditCount);for(var i=0;i<t.length;i++)n.data.push(t[i]);console.log("pageフォルダにて結合push終え"),n.currentmaxid=n.data.length,n.existCount=n.data.length,console.log("pageフォルダにてWATCH終え")}))},changedNodeElement:function(){var t=this;this.$nextTick((function(){alert("nodeelement changing"),t.newText=t.$store.state.mapData.nodeChangedList[t.changedNodeElement-1]}))}},methods:{alertNode:function(t){var e,data=this.filterById(t),n=[];if(alert("clicked node = "+data.text+"\n  number is"+data.id),this.tgtparents=data.text,this.tgnumber=data.id,this.nodeMemo=data.text,this.nodeMemoTitle=data.text,this.nodeMemoId=data.id,this.$store.commit("nodeTitle/setTitle",this.nodeMemoTitle),this.$store.commit("nodeTitle/setId",this.nodeMemoId),"link"in data){for(var i=0;i<data.next.length;i++)e={link:data.link[i],next:this.filterById(data.next[i]).text},n.push(e);this.linkText=n.slice(0,n.length),this.$store.commit("nodeTitle/setLinkTextList",this.linkText),this.$store.commit("nodeTitle/setLinkTextListCount"),console.log(this.linkText),console.log(this.$store.state.nodeTitle.linkTextList)}else console.log("link無し"),this.$store.commit("nodeTitle/setLinkTextList",[]),this.$store.commit("nodeTitle/setLinkTextListCount"),console.log(this.$store.state.nodeTitle.linkTextList)},filterByText:function(text){for(var t=this.data,i=0;i<this.currentmaxid;i++)if(t[i].text===text)return t[i];return null},filterById:function(t){for(var e=this.data,i=0;i<this.currentmaxid;i++)if(e[i].id==t)return e[i];return null},addNewNode:function(t){var e=this.filterByText(this.tgtparents).id,n=""===this.newText?"new_el":this.newText;this.node1=this.data.concat(),this.data.length=0,this.currentmaxid++,this.existCount++,this.totalCount=this.existCount+this.deleteCount,alert(this.totalCount+" = total\n"+this.existCount+" = exist\n"+this.deleteCount+" = delete");for(var i=0;i<this.existCount-1;i++)if(this.node1[i].id===e){String(this.currentmaxid);void 0===this.node1[i].next&&(this.node1[i].next=[]),this.node1[i].next.push(this.totalCount.toString())}var o={id:this.totalCount.toString(),text:n,next:[],editable:!0};this.node1.push(o),this.clearText(),this.ketugou()},clearText:function(t){this.tgtparents="",this.newText="",this.tgnumber="",this.nextId=""},addNext:function(t){alert("リンク開始");var e=this.filterByText(this.tgtparents).id,n=this.filterByText(this.nextId);console.log(n.id.toString()+"が親のnextに追加されます"),this.node1=this.data.concat(),this.data.length=0;for(var i=0;i<this.node1.length;i++)this.node1[i].id===e&&(console.log("該当するノードの配列上の番号は  "+e+"です。"),void 0===this.node1[i].next&&(this.node1[i].next=[]),this.node1[i].next.push(n.id.toString()));this.clearText(),this.ketugou()},editNode:function(t){for(var e=this.filterByText(this.tgtparents).id,i=0;i<this.currentmaxid;i++)this.data[i].id===e&&(this.data[i].text=this.editText);this.clearText()},saveNode:function(t){d.a.ref("map/"+this.id+"/tizu/nodes/").set(this.data),d.a.ref("map/"+this.id+"/tizu/deleteCount/").set(this.deleteCount)},unLink:function(t){var e=this.filterByText(this.tgtparents).id,n=this.filterByText(this.nextId);console.log(n.id.toString()+"が親のnextから外されます"),this.node1=this.data.concat(),this.data.length=0;for(var i=0;i<this.node1.length;i++)this.node1[i].id===e&&(console.log("該当するノードの配列上の番号は  "+e+"です。"),this.node1[i].next.includes(n.id.toString())&&(console.log(this.node1[i].next.indexOf(n.id.toString())),this.node1[i].next.splice(this.node1[i].next.indexOf(n.id.toString()),1)));this.clearText(),this.ketugou()},easydelete:function(t){alert("削除を始めます。");var e=0,n=this.deleteCount+this.existCount,o=this.filterByText(this.tgtparents).id;this.node1=this.data.concat(),this.data.splice(0,this.data.length-1),console.log(o+"番を削除します\n  deleteSize is"+n);for(var i=0;i<n;i++)if(this.node1[i].id===o)if(alert("削除対象を見つけました。"),void 0===this.node1[i].next||0==this.node1[i].next.length){e=i;for(var d=0;d<this.currentmaxid;d++)void 0!==this.node1[d].next&&this.node1[d].next.includes(i.toString())&&(console.log(d+" 回目　このノードと繋がっているノードから対象を削除します。"),this.serchAndDeleteNext(this.node1[d].next,o))}else alert("このノードは他のノードと繋がっているため、削除できません。");0!=e&&(console.log(e+" 番のノードを削除します。"),this.node1.splice(e,1)),alert("削除を終了します。"),this.deleteCount++,this.clearText(),this.ketugou()},ketugou:function(t){this.currentmaxid=this.node1.length;for(var i=0;i<this.node1.length;i++)this.data.push(this.node1[i]);alert("結合終えました。"),this.node1.splice(0,this.node1.length)},serchAndDeleteNext:function(t,e){console.log("Next整理 nextList.length = "+t.length);for(var n=0;n<t.length;n++)console.log("Next整理 For開始"),t[n]==e&&(console.log(t[n]+"; nextList  "+e+"; deleteId"),t.splice(n,1))},reTakeNo:function(t){for(var i=0;i<this.currentmaxid;i++)this.node1[i].id=(i+1).toString()},getData:function(){this.id=this.$store.state.userInfo.userId}},components:{MermaidComponent:o.a}},r=(n(502),n(58)),component=Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"titled"},[t.editParetto?e("div",[e("div",{staticClass:"inputt"},[t._v("\n      Set Parent:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tgtparents,expression:"tgtparents"}],staticClass:"compwht",domProps:{value:t.tgtparents},on:{input:function(e){e.target.composing||(t.tgtparents=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n      NO:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tgnumber,expression:"tgnumber"}],staticClass:"compwht",domProps:{value:t.tgnumber},on:{input:function(e){e.target.composing||(t.tgnumber=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",on:{click:t.saveNode}},[t._v("\n        Save\n      ")])]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n      Set Text : "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newText,expression:"newText"}],staticClass:"compwht",domProps:{value:t.newText},on:{input:function(e){e.target.composing||(t.newText=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.addNewNode}},[t._v("\n        Add\n      ")])]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n        Link:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nextId,expression:"nextId"}],staticClass:"compwht",domProps:{value:t.nextId},on:{input:function(e){e.target.composing||(t.nextId=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.addNext}},[t._v("\n        Link\n      ")]),t._v(" "),e("button",{staticClass:"compwht",on:{click:t.unLink}},[t._v("\n        Unkink\n      ")])]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n        Edit:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editText,expression:"editText"}],staticClass:"compwht",domProps:{value:t.editText},on:{input:function(e){e.target.composing||(t.editText=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.editNode}},[t._v("\n        Edit\n      ")])]),t._v(" "),e("br"),t._v("\n    check parent exist :"+t._s(t.isexistparent)+"\n            "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.easydelete}},[t._v("\n        EasyDelete\n      ")]),t._v(" "),e("button",{staticClass:"compwht",on:{click:t.ketugou}},[t._v("\n        結合\n      ")])]):t._e(),t._v(" "),e("vue-mermaid",{staticClass:"mermaid",attrs:{nodes:t.data,config:t.mermaid,type:"graph TD"},on:{nodeClick:t.alertNode}})],1)])}),[],!1,null,null,null);e.default=component.exports}}]);