(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{503:function(t,e,n){var content=n(505);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("7ebe28e0",content,!0,{sourceMap:!1})},504:function(t,e,n){"use strict";n(503)},505:function(t,e,n){var o=n(27)(!1);o.push([t.i,"\n.container {\n  top: 10px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n}\n.titled {\n  width: 60%;\n  margin: auto;\n  align-items: left;\n  font-family: 'Quicksand', 'Source Sans Pro', -apple-system, BlinkMacSystemFont,\n    'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  display: block;\n  font-size: 20px;\n  color: #35495e;\n  letter-spacing: 1px;\n}\n.subtitle {\n  font-weight: 300;\n  font-size: 42px;\n  color: #526488;\n  word-spacing: 5px;\n  padding-bottom: 15px;\n}\n.links {\n  padding-top: 15px;\n}\n.inputt {\n  margin-top: 10px;\n}\n.compwht {\n  background-color: #c7c7c7;\n  margin-top: 5px;\n}\n.v-application--wrap {\n  background-color: #fff;\n  /* background-color: #979797; */\n}\n.mermaid{\n  width: flex;\n}\n.markdown{\n  top: 0pt;\n}\n\n",""]),t.exports=o},508:function(t,e,n){"use strict";n.r(e);n(37),n(7),n(81),n(70),n(90),n(150);var o=n(219),d=n(97),r={name:"Mermaid",props:{userName:{type:String},id:{type:String}},data:function(){return{editParetto:!1,tgtparents:"",newText:"",tgnumber:"",nextId:"",editText:"",currentmaxid:6,deleteCount:0,existCount:6,totalCount:0,nodeMemoTitle:"nodeMemo...",nodeMemoId:"1",title:"vue-mermaid",mermaid:{theme:"default",startOnLoad:!1,securityLevel:"loose"},data:[{id:"1",text:"A",link:"---",next:["2"],editable:!0,style:"fill:#f9f,stroke:#333,stroke-width:4px"},{id:"2",text:"B",edgeType:"circle",next:["3"]},{id:"3",text:"C",next:["4","6"],link:["--yes--\x3e","--no--\x3e"]},{id:"4",text:"D",link:["-- This is the text ---"],next:["5"]},{id:"5",text:"E"},{id:"6",text:"F"}],node1:[]}},created:function(){},computed:{countid:function(t){return this.deleteCount+this.existCount},isexistparent:function(t){return this.isButtonAble?"NG":"OK"},isButtonAble:function(t){return null===this.filterByText(this.tgtparents)},mapDataEditCount:function(t){return this.$store.getters["mapData/getMapDataEditCount"]},changedNodeElement:function(){return this.$store.getters["mapData/getNodechangedListLen"]}},watch:{mapDataEditCount:function(t,e){var n=this;this.$nextTick((function(){var t=JSON.parse(JSON.stringify(n.$store.state.mapData.mapDataList));n.data.length=0,alert("pageフォルダ "+n.mapDataEditCount);for(var i=0;i<t.length;i++)n.data.push(t[i]);alert("pageフォルダにて結合push終え"),n.currentmaxid=n.data.length,n.existCount=n.data.length,alert("pageフォルダにてWATCH終え")}))},changedNodeElement:function(){var t=this;this.$nextTick((function(){alert("nodeelement changing"),t.newText=t.$store.state.mapData.nodeChangedList[t.changedNodeElement-1]}))}},methods:{alertNode:function(t){var data=this.filterById(t);alert("clicked node = "+data.text+"\n  number is"+data.id),this.tgtparents=data.text,this.tgnumber=data.id,this.nodeMemo=data.text,this.nodeMemoTitle=data.text,this.nodeMemoId=data.id,this.$store.commit("nodeTitle/setTitle",this.nodeMemoTitle),this.$store.commit("nodeTitle/setId",this.nodeMemoId)},filterByText:function(text){for(var t=this.data,i=0;i<this.currentmaxid;i++)if(t[i].text===text)return t[i];return null},filterById:function(t){for(var e=this.data,i=0;i<this.currentmaxid;i++)if(e[i].id==t)return e[i];return null},addNewNode:function(t){var e=this.filterByText(this.tgtparents).id,n=""===this.newText?"new_el":this.newText;this.node1=this.data.concat(),this.data.length=0,this.currentmaxid++,this.existCount++,this.totalCount=this.existCount+this.deleteCount,alert(this.totalCount+" = total\n"+this.existCount+" = exist\n"+this.deleteCount+" = delete");for(var i=0;i<this.existCount-1;i++)if(this.node1[i].id===e){String(this.currentmaxid);void 0===this.node1[i].next&&(this.node1[i].next=[]),this.node1[i].next.push(this.totalCount.toString())}var o={id:this.totalCount.toString(),text:n,next:[],editable:!0};this.node1.push(o),this.clearText(),this.ketugou()},clearText:function(t){this.tgtparents="",this.newText="",this.tgnumber="",this.nextId=""},addNext:function(t){alert("リンク開始");var e=this.filterByText(this.tgtparents).id,n=this.filterByText(this.nextId);alert(n.id.toString()+"が親のnextに追加されます"),this.node1=this.data.concat(),this.data.length=0;for(var i=0;i<this.node1.length;i++)this.node1[i].id===e&&(alert("該当するノードの配列上の番号は  "+e+"です。"),void 0===this.node1[i].next&&(this.node1[i].next=[]),this.node1[i].next.push(n.id.toString()));this.clearText(),this.ketugou()},editNode:function(t){for(var e=this.filterByText(this.tgtparents).id,i=0;i<this.currentmaxid;i++)this.data[i].id===e&&(this.data[i].text=this.editText);this.clearText()},saveNode:function(t){d.a.ref(this.id+"/pra2/test/").set(this.data),d.a.ref(this.id+"/pra2/deleteCount/").set(this.deleteCount)},unLink:function(t){var e=this.filterByText(this.tgtparents).id,n=this.filterByText(this.nextId);alert(n.id.toString()+"が親のnextから外されます"),this.node1=this.data.concat(),this.data.length=0;for(var i=0;i<this.node1.length;i++)this.node1[i].id===e&&(alert("該当するノードの配列上の番号は  "+e+"です。"),this.node1[i].next.includes(n.id.toString())&&(alert(this.node1[i].next.indexOf(n.id.toString())),this.node1[i].next.splice(this.node1[i].next.indexOf(n.id.toString()),1)));this.clearText(),this.ketugou()},easydelete:function(t){alert("削除を始めます。");var e=0,n=this.deleteCount+this.existCount,o=this.filterByText(this.tgtparents).id;this.node1=this.data.concat(),this.data.splice(0,this.data.length-1),alert(o+"番を削除します\n  deleteSize is"+n);for(var i=0;i<n;i++)if(this.node1[i].id===o)if(alert("削除対象を見つけました。"),void 0===this.node1[i].next||0==this.node1[i].next.length){e=i;for(var d=0;d<this.currentmaxid;d++)void 0!==this.node1[d].next&&this.node1[d].next.includes(i.toString())&&(alert(d+" 回目　このノードと繋がっているノードから対象を削除します。"),this.serchAndDeleteNext(this.node1[d].next,o))}else alert("このノードは他のノードと繋がっているため、削除できません。");0!=e&&(alert(e+" 番のノードを削除します。"),this.node1.splice(e,1)),alert("削除を終了します。"),this.deleteCount++,this.clearText(),this.ketugou()},ketugou:function(t){this.currentmaxid=this.node1.length;for(var i=0;i<this.node1.length;i++)this.data.push(this.node1[i]);alert("結合終えました。"),this.node1.splice(0,this.node1.length)},serchAndDeleteNext:function(t,e){alert("Next整理 nextList.length = "+t.length);for(var n=0;n<t.length;n++)alert("Next整理 For開始"),t[n]==e&&(alert(t[n]+"; nextList  "+e+"; deleteId"),t.splice(n,1))},reTakeNo:function(t){for(var i=0;i<this.currentmaxid;i++)this.node1[i].id=(i+1).toString()},getData:function(){var t=this;this.id=this.$store.state.userInfo.userId,d.a.ref(this.id+"/tizu/test/").once("value").then((function(e){if(e.val()){var n=e.val();t.existCount=n.length,t.data.splice(1,t.data.length),t.ketugou(n)}})),d.a.ref(this.id+"/tizu/deleteCount/").once("value").then((function(e){e.val()&&(t.deleteCount=e.val(),t.$store.commit("mapData/setDeleteCount",t.deleteCount))}))}},components:{MermaidComponent:o.a}},l=(n(504),n(56)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"titled"},[e("MermaidComponent"),t._v(" "),t.editParetto?e("div",[e("div",{staticClass:"inputt"},[t._v("\n      Set Parent:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tgtparents,expression:"tgtparents"}],staticClass:"compwht",domProps:{value:t.tgtparents},on:{input:function(e){e.target.composing||(t.tgtparents=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n      NO:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tgnumber,expression:"tgnumber"}],staticClass:"compwht",domProps:{value:t.tgnumber},on:{input:function(e){e.target.composing||(t.tgnumber=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",on:{click:t.saveNode}},[t._v("\n        Save\n      ")])]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n      Set Text : "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newText,expression:"newText"}],staticClass:"compwht",domProps:{value:t.newText},on:{input:function(e){e.target.composing||(t.newText=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.addNewNode}},[t._v("\n        Add\n      ")])]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n        Link:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nextId,expression:"nextId"}],staticClass:"compwht",domProps:{value:t.nextId},on:{input:function(e){e.target.composing||(t.nextId=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.addNext}},[t._v("\n        Link\n      ")]),t._v(" "),e("button",{staticClass:"compwht",on:{click:t.unLink}},[t._v("\n        Unkink\n      ")])]),t._v(" "),e("div",{staticClass:"inputt"},[t._v("\n        Edit:\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editText,expression:"editText"}],staticClass:"compwht",domProps:{value:t.editText},on:{input:function(e){e.target.composing||(t.editText=e.target.value)}}}),t._v(" "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.editNode}},[t._v("\n        Edit\n      ")])]),t._v(" "),e("br"),t._v("\n    check parent exist :"+t._s(t.isexistparent)+"\n            "),e("button",{staticClass:"compwht",attrs:{disabled:t.isButtonAble},on:{click:t.easydelete}},[t._v("\n        EasyDelete\n      ")]),t._v(" "),e("button",{staticClass:"compwht",on:{click:t.ketugou}},[t._v("\n        結合\n      ")])]):t._e(),t._v(" "),e("vue-mermaid",{staticClass:"mermaid",attrs:{nodes:t.data,config:t.mermaid,type:"graph TD"},on:{nodeClick:t.alertNode}})],1)])}),[],!1,null,null,null);e.default=component.exports}}]);